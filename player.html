<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Squid Hunt</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: url('Avengers.png') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            cursor: url('magnifying-glass.png'), auto;
            animation: moveBackground 20s linear infinite;
        }

        @keyframes moveBackground {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 0%; }
            100% { background-position: 0% 0%; }
        }

        .container, .set-selection {
            background: rgba(0, 0, 0, 0.8);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 800px;
            width: 90%;
            margin: 20px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        #timer {
            font-size: 1.2rem;
            margin: 1rem 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-weight: bold;
        }

        #algorithm {
            font-family: 'Courier New', Courier, monospace;
            text-align: left;
            white-space: pre;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-size: 1.1rem;
            line-height: 1.4;
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            color: #333;
        }

        .btn {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 10px 5px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        #clue {
            margin: 15px 0;
            padding: 15px;
            background: rgba(76, 175, 80, 0.2);
            border-radius: 8px;
            font-size: 1.1rem;
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .popup {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            position: relative;
            animation: popupIn 0.3s ease-out;
        }

        @keyframes popupIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .popup h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .popup p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .popup-btn {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .popup-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="set-selection" id="setSelection">
        <h2>Select a Team Number</h2>
        <input type="number" id="teamNumber" placeholder="Enter team number (1-20)" min="1" max="20">
        <button class="btn" onclick="startGame()">Start Game</button>
    </div>
    
    <div class="container" id="gameContainer" style="display:none;">
        <h1>Squid Hunt!</h1>
        <div id="timer">Time Left: 1min</div>
        <div id="algorithm"></div>
        <input type="text" id="answer" placeholder="Enter your answer">
        <button class="btn" onclick="checkAnswer()">Submit</button>
        <button class="btn" id="nextButton" onclick="nextQuestion()" style="display:none;">Next Question</button>
        <p id="clue" style="display:none;"></p>
    </div>

    <div class="popup-overlay" id="popupOverlay">
        <div class="popup">
            <h3 id="popupTitle"></h3>
            <p id="popupMessage"></p>
            <button class="popup-btn" onclick="closePopup()">OK</button>
        </div>
    </div>

    <audio id="wrongSound">
        <source src="wrong.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="correctSound">
        <source src="correct.mp3" type="audio/mpeg">
    </audio>

    <audio id="backgroundMusic" loop>
        <source src="background-music.mp3" type="audio/mpeg">
    </audio>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
    <script>
        const totalTeams = 20;

        const algorithms = [
            { 
                question: `#include <stdio.h>
int main() {
    int arr[] = {1, 2, 3, 4, 5};
    int *ptr = arr;
    printf("%d", *(ptr + 2));
    return 0;
}`,
                answer: "3"
            },
            { 
                question: `#include <stdio.h>
void swap(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}
int main() {
    int x = 5, y = 10;
    swap(&x, &y);
    printf("%d", x);
    return 0;
}`,
                answer: "10"
            },
            { 
                question: `#include <stdio.h>
int main() {
    int x = 5;
    int *p = &x;
    int **q = &p;
    printf("%d", **q);
    return 0;
}`,
                answer: "5"
            },
            { 
                question: `#include <stdio.h>
void fun(int *ptr) {
    *ptr = *ptr + 5;
}
int main() {
    int arr[] = {10, 20, 30};
    fun(&arr[1]);
    printf("%d", arr[1]);
    return 0;
}`,
                answer: "25"
            },
            { 
                question: `#include <stdio.h>
int main() {
    int a = 10;
    int *p = &a;
    *p = 20;
    printf("%d", a);
    return 0;
}`,
                answer: "20"
            }
        ];

        // Clues for teams 1-10
        const cluesTeam1to10 = [
            "Your next clue is in Room 101!",
            "Check behind the main notice board!",
            "Look under the red chair in the library!",
            "Find it near the water cooler!",
            "Search near the principal's office!"
        ];

        // Clues for teams 11-20
        const cluesTeam11to20 = [
            "Check the computer lab entrance!",
            "Look inside the sports equipment room!",
            "Find it near the cafeteria counter!",
            "Search behind the auditorium curtain!",
            "Your next clue is in the science lab!"
        ];

        let teamData = {};
        let currentTeam = null;
        let timer;

        function showPopup(title, message) {
            document.getElementById('popupTitle').textContent = title;
            document.getElementById('popupMessage').textContent = message;
            document.getElementById('popupOverlay').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popupOverlay').style.display = 'none';
        }

        window.onload = function() {
            initializeTeams();
            document.getElementById('backgroundMusic').play().catch(e => console.log("Audio autoplay blocked"));
        }

        function initializeTeams() {
            for (let i = 1; i <= totalTeams; i++) {
                teamData[`team${i}`] = {
                    algorithms: shuffleArray([...algorithms]),
                    currentAlgorithmIndex: 0
                };
            }
        }

        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function startGame() {
            const teamNumber = parseInt(document.getElementById("teamNumber").value);
            
            if (teamNumber < 1 || teamNumber > totalTeams) {
                showPopup("Invalid Team", "Please enter a valid team number (1-20).");
                return;
            }

            currentTeam = `team${teamNumber}`;
            document.getElementById('setSelection').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            loadAlgorithm();
            startTimer();
        }

        function loadAlgorithm() {
            let team = teamData[currentTeam];
            if (team.currentAlgorithmIndex < team.algorithms.length) {
                document.getElementById('algorithm').textContent = 
                    team.algorithms[team.currentAlgorithmIndex].question;
                document.getElementById('clue').style.display = 'none';
                document.getElementById('nextButton').style.display = 'none';
            }
        }

        function getClueForTeam(teamNumber, clueIndex) {
            if (teamNumber <= 10) {
                return cluesTeam1to10[clueIndex];
            } else {
                return cluesTeam11to20[clueIndex];
            }
        }

        function checkAnswer() {
            const userAnswer = document.getElementById('answer').value.trim();
            let team = teamData[currentTeam];
            let currentAlgorithm = team.algorithms[team.currentAlgorithmIndex];
            let teamNumber = parseInt(currentTeam.replace('team', ''));
            
            if (userAnswer === currentAlgorithm.answer) {
                clearInterval(timer);
                document.getElementById("correctSound").play().catch(e => console.log("Audio play blocked"));
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });

                let clueIndex = team.currentAlgorithmIndex;
                let clue = getClueForTeam(teamNumber, clueIndex);
                document.getElementById('clue').textContent = `🎉 Your clue: "${clue}"`;
                document.getElementById('clue').style.display = 'block';
                document.getElementById('nextButton').style.display = 'block';
                
                if (team.currentAlgorithmIndex >= algorithms.length - 1) {
                    showPopup("Congratulations! 🎉", "You have completed the treasure hunt!");
                    document.getElementById('timer').textContent = 'Game Complete!';
                } else {
                    showPopup("Correct! ✨", "Well done! Click 'Next Question' when you're ready to continue.");
                }
            } else {
                document.getElementById("wrongSound").play().catch(e => console.log("Audio play blocked"));
                showPopup("Incorrect ❌", "Try again!");
                document.getElementById('answer').value = '';
            }
        }

        function nextQuestion() {
            let team = teamData[currentTeam];
            team.currentAlgorithmIndex++;
            document.getElementById('answer').value = '';
            loadAlgorithm();
            startTimer();
        }

        function startTimer() {
            let timeLeft = 60;
            document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    showPopup("Time's Up! ⏰", "Game Over!");
                }
            }, 1000);
        }

        document.getElementById('answer').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
    </script>
</body>
</html>